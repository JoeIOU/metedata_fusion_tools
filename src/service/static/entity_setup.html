<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vue.js Edition</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <style>
        .el-table-add-row {
            margin-top: 10px;
            width: 100%;
            height: 34px;
            border: 1px dashed #c1c1cd;
           border-radius: 3px;
            cursor: pointer;
            justify-content: center;
            display: flex;
            line-height: 34px;
        }
         .bg-purple-light {
            background: #e5e9f2;
         }

        .el-dropdown {
            vertical-align: top;
          }
        .el-dropdown + .el-dropdown {
            margin-left: 15px;
          }
        .el-icon-arrow-down {
            font-size: 12px;
          }
          .el-table__body-wrapper::-webkit-scrollbar{
             /*width: 0;宽度为0隐藏*/
            width: 2px;
          }
         .el-table__body-wrapper::-webkit-scrollbar-thumb{
            border-radius: 2px;
            height: 50px;
            background: #eee;
          }
         .el-table__body-wrapper::-webkit-scrollbar-track{
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            border-radius: 2px;
            background: rgba(0,0,0,0.4);
         }


    </style>
</head>
<body>
<div id="app1">
    <el-row>
        <el-col span="24">
            <div class="grid-content bg-purple-light">
                <span class="demonstration">Select Entity: </span>
                <el-select v-model="select1" placeholder="请选择实体" @change="handleClick">
                    <el-option
                            v-for="item in options"
                            :key="item.value"
                            :label="item.label"
                            :value="{ value: item.value, label: item.label }">
                    </el-option>
                </el-select>
            </div>
        </el-col>
<!--        <el-col span="12">-->
<!--            <div class="grid-content bg-purple-light">ABC-->
<!--            </div>-->
<!--        </el-col>-->
    </el-row>
</div>
</br>
<div id="app">
    <el-row>
        <el-col span="24">
            <div>Entity Details:</div>
            <el-table size="mini" :data="master_user.data.slice((currentPage-1)*pagesize,currentPage*pagesize)" border
                      highlight-current-row style="max-height:500px;overflow-y:auto;"
                      :header-cell-style="{'background-color': '#dddddd','color': 'rgb(0, 0, 0)','border-bottom': '1px rgb(200, 200, 200) solid'}">
                <el-table-column type="index" label="No."></el-table-column>
                <el-table-column v-for="(v,i) in master_user.columns" :prop="v.field" :label="v.title" :type="v.type"
                                 :width="v.width">
                    <template slot-scope="scope">
                        <span v-if="scope.row.isSet">
                            <span v-if="v.type=='datetime' || v.type=='timestamp'">
                                <el-date-picker size="mini" style="width:180px"
                                                v-model="master_user.sel[v.field]"
                                                type="datetime" format="yyyy-MM-dd HH:mm:ss"
                                                value-format="yyyy-MM-dd HH:mm:ss"
                                                placeholder="选择日期和时间">
                                </el-date-picker>
                            </span>
                            <span v-else-if="v.type=='date'">
                                <el-date-picker size="mini" style="width:180px"
                                                v-model="master_user.sel[v.field]"
                                                type="date"
                                                value-format="yyyy-MM-dd"
                                                placeholder="选择日期">
                                </el-date-picker>
                            </span>
                            <span v-else-if="v.type=='bigint' ||v.type=='int'">
                                <el-input v-model="master_user.sel[v.field]" :rows="1" size="mini"
                                          placeholder="Input Number" oninput="value=value.replace(/[^0-9]/g,'')" maxlength="20">
                                </el-input>
                            </span>
                            <span v-else-if="v.type=='float' ||v.type=='numeric'">
                                <el-input-number size="mini" v-model="master_user.sel[v.field]" :precision="8"
                                                 :controls="false"></el-input-number>
                            </span>
                            <span v-else-if="v.type=='char' ||v.type=='boolean'">
                                <el-input size="mini" placeholder="Input Something" :rows="1"
                                          v-model="master_user.sel[v.field]" maxlength="10"></el-input>
                            </span>
                            <span v-else>
                                <el-input type="textarea"  size="mini" :rows="1" placeholder="Input Something"
                                          v-model="master_user.sel[v.field]"  maxlength="256">
                                </el-input>
                            </span>
                        </span>
                        <span v-else>{{scope.row[v.field]}}</span>
                    </template>
                </el-table-column>
                <el-table-column label="Operation" width="110">
                    <template slot-scope="scope">
                        <span class="el-tag el-tag--info el-tag--mini" style="cursor: pointer;"
                              @click="pwdChange(scope.row,scope.$index,true)">
                                <span v-if="scope.row.isSet">
                                    <el-tooltip placement="top">
		                                <div slot="content">Save</div>
                                            <i class="el-icon-check"></i>
                                    </el-tooltip>
                                </span>
                                <span v-else>
                                    <el-tooltip placement="top">
		                                <div slot="content">Edit</div>
                                            <i class="el-icon-edit"></i>
                                    </el-tooltip>
                                 </span>
                        </span>
                        <span v-if="!scope.row.isSet" class="el-tag el-tag--danger el-tag--mini"
                              style="cursor: pointer;"
                              @click="pwdChange(scope.row,scope.$index,false)">
                                    <el-tooltip placement="top">
		                                <div slot="content">Delete</div>
                                        <i class="el-icon-delete"></i>
                                    </el-tooltip>
                        </span>
                        <span v-else class="el-tag  el-tag--mini" style="cursor: pointer;"
                              @click="pwdChange(scope.row,scope.$index,false)">
                                    <el-tooltip placement="top">
		                                <div slot="content">Cancel</div>
                                        <i class="el-icon-refresh"></i>
                                    </el-tooltip>
                        </span>
                        <span class="el-tag el-tag--info el-tag--mini" style="cursor: pointer;"
                              @click="openDialog(scope.row,scope.$index)">
                                    <el-tooltip placement="top">
		                                <div slot="content">Detail</div>
                                        <i class="el-icon-edit-outline"></i>
                                    </el-tooltip>
                        </span>
                    </template>
                </el-table-column>
            </el-table>
            <div class="pagination">
                <el-pagination
                        @size-change="handleSizeChange"
                        @current-change="handleCurrentChange"
                        :current-page="currentPage"
                        :page-sizes="[10, 20, 50, 100]"
                        :page-size="pagesize"
                        layout="total, sizes,prev, pager, next"
                        :total="master_user.data.length"
                        prev-text="上一页"
                        next-text="下一页">
                </el-pagination>
            </div>
        </el-col>
    </el-row>

    <el-row>
        <!-- Form dialog -->
        <span v-if="master_user.sel">
        <el-dialog :title="dialog_title" :visible.sync="dialogFormVisible" :key="timer_time">
            <el-form :model="master_user" ref="formSubmit">
                <el-row>
                    <el-col  v-for="(v, i) in master_user.columns" :key="v.field" :span="12" style="height:50px">
                            <span v-if="v.type=='datetime' || v.type=='timestamp'">
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-date-picker size="mini" style="width:180px"
                                                v-model="master_user.sel[v.field]"
                                                type="datetime" format="yyyy-MM-dd HH:mm:ss"
                                                value-format="yyyy-MM-dd HH:mm:ss"
                                                placeholder="选择日期和时间">
                                </el-date-picker>
                                </el-form-item>
                            </span>
                            <span v-else-if="v.type=='date'">
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-date-picker size="mini" style="width:180px"
                                                v-model="master_user.sel[v.field]"
                                                type="date"
                                                value-format="yyyy-MM-dd"
                                                placeholder="选择日期">
                                </el-date-picker>
                                </el-form-item>
                            </span>
                            <span v-else-if="v.type=='bigint' ||v.type=='int'">
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-input v-model="master_user.sel[v.field]" :rows="1" size="mini"
                                          placeholder="Input Number"
                                          style="width:180px" oninput="value=value.replace(/[^0-9]/g,'')" maxlength="20">
                                </el-input>
                                </el-form-item>
                            </span>
                            <span v-else-if="v.type=='float' ||v.type=='numeric'">
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-input-number size="mini" v-model="master_user.sel[v.field]" :precision="4"
                                                 :controls="false" style="width:180px"></el-input-number>
                                </el-form-item>
                            </span>
                            <span v-else-if="v.type=='char' ||v.type=='boolean'">
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-input type="text" :rows="1" size="mini" placeholder="Input Something"
                                          v-model="master_user.sel[v.field]" style="width:180px" maxlength="10"
                                          show-word-limit="true"></el-input>
                                </el-form-item>
                            </span>
                            <span v-else>
                                <el-form-item :label="v.title" :prop="v.field" :label-width="formLabelWidth">
                                <el-input type="textarea" :rows="2" size="mini" placeholder="Input Something"
                                          v-model="master_user.sel[v.field]" style="width:180px" maxlength="256"
                                          show-word-limit="true"></el-input>
                                </el-form-item>
                            </span>

                    </el-col>
                </el-row>
            </el-form>
            <div slot="footer" class="dialog-footer">
                <el-button @click="pwdChange(row_sel,0,false)">取 消</el-button>
                <el-button type="primary" @click="pwdChange(row_sel,0,true)">确 定</el-button>
            </div>
        </el-dialog>
        </span>
    </el-row>
</div>
<!-- import Vue before Element -->
<!--<script src="https://unpkg.com/vue@2.6.12/dist/vue.js"></script>-->
<script src="https://unpkg.com/vue@2.5.17/dist/vue.min.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/json-bigint-parser-browser@1.0.4/json-bigint-browser.min.js"></script>
<script src="/static/js/entity_setup.js"></script>
</body>

</html>
